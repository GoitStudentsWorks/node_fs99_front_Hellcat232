{"version":3,"file":"SignInPage-w2RrlbNA.js","sources":["../../src/components/GoogleLoginButton/GoogleLoginButton.jsx","../../src/components/SignInForm/SignInForm.jsx","../../src/pages/SignInPage/SignInPage.jsx"],"sourcesContent":["import { GoogleLogin } from \"@react-oauth/google\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { loginGoogle } from \"../../redux/auth/operations\";\nimport styles from \"./GoogleLoginButton.module.css\";\nimport toast from \"react-hot-toast\";\n\nconst GoogleLoginButton = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const handleSuccess = async (response) => {\n    const token = response.credential;\n    try {\n      const result = await dispatch(loginGoogle({ token })).unwrap();\n      localStorage.setItem(\"accessToken\", result.accessToken);\n      localStorage.setItem(\"refreshToken\", result.refreshToken);\n      navigate(\"/tracker\");\n    } catch (error) {\n      console.error(\"Google Login failed:\", error);\n      toast.error(`Google Login failed: ${error}`);\n    }\n  };\n\n  const handleFailure = (error) => {\n    console.error(\"Google Login failed:\", error);\n  };\n\n  return (\n    <div className={styles.googleLoginConteiner}>\n    <div className={styles.googleLoginButton}>\n      <GoogleLogin\n        clientId={import.meta.env.VITE_GOOGLE_CLIENT_ID}\n        buttonText=\"Login with Google\"\n        onSuccess={handleSuccess}\n        onFailure={handleFailure}\n        cookiePolicy={\"single_host_origin\"}\n      />\n      </div>\n    </div>\n  );\n};\n\nexport default GoogleLoginButton;\n","import * as yup from \"yup\";\nimport { login } from \"../../redux/auth/operations\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { useState } from \"react\";\nimport { FaRegEyeSlash } from \"react-icons/fa6\";\nimport { selectClick } from \"../../redux/auth/selectors\";\n\nimport css from \"./SignInForm.module.css\";\nimport GoogleLoginButton from \"../GoogleLoginButton/GoogleLoginButton\";\nimport toast from \"react-hot-toast\";\n\nconst SignInSchema = yup.object().shape({\n  email: yup.string().email(\"Invalid email\").required(\"Email is required\"),\n  password: yup.string().required(\"Password is required\"),\n});\n\nconst SignInForm = () => {\n  const dispatch = useDispatch();\n\n  const navigate = useNavigate();\n\n  const stopClick = useSelector(selectClick);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(SignInSchema),\n  });\n\n  const [passwordShown, setPasswordShown] = useState(false);\n\n  const togglePasswordVisibility = () => {\n    setPasswordShown(!passwordShown);\n  };\n\n  const onSubmit = async (data) => {\n    try {\n      const response = await dispatch(login(data)).unwrap();\n      const { accessToken, refreshToken } = response;\n      localStorage.setItem(\"accessToken\", accessToken);\n      localStorage.setItem(\"refreshToken\", refreshToken);\n      navigate(\"/tracker\");\n    } catch (error) {\n      // console.error(\"Login failed:\", error);\n      // toast.error(`Login failed: ${error}`);\n    }\n  };\n\n  const handleLoginSuccess = (user) => {\n    localStorage.setItem(\"accessToken\", user.accessToken);\n    localStorage.setItem(\"refreshToken\", user.refreshToken);\n    navigate(\"/tracker\");\n  };\n\n  return (\n    <div className={css.signInForm}>\n      <h2 className={css.signInFormHeader}>Sign In</h2>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <label className={css.signInFormLabel}>Email</label>\n        <input\n          className={`${css.signInFormInput} ${\n            errors.email ? `${css.errorPlaceholder} ${css.errorInput}` : \"\"\n          }`}\n          type=\"email\"\n          placeholder={errors.email ? \"Invalid email\" : \"Enter your email\"}\n          {...register(\"email\")}\n        />\n        {errors.email && (\n          <p className={css.errorMessage}>{errors.email.message}</p>\n        )}\n\n        <label className={css.signInFormLabel}>Password</label>\n        <div className={css.inputContainer}>\n          <input\n            className={`${css.signInFormInput} ${\n              errors.password ? `${css.errorPlaceholder} ${css.errorInput}` : \"\"\n            }`}\n            type={passwordShown ? \"text\" : \"password\"}\n            placeholder={\n              errors.password ? \"Invalid password\" : \"Enter your password\"\n            }\n            {...register(\"password\")}\n          />\n          <FaRegEyeSlash\n            className={css.togle}\n            onClick={togglePasswordVisibility}\n          />\n        </div>\n\n        {errors.password && (\n          <p className={css.errorMessage}>{errors.password.message}</p>\n        )}\n\n        <button\n          type=\"submit\"\n          disabled={stopClick === \"pending\"}\n          className={css.signInBtn}\n        >\n          Sign In\n        </button>\n      </form>\n      <p className={css.signInPageText}>\n        Don't have an account?{\" \"}\n        <Link to=\"/signup\" className={css.SignInPageLink}>\n          Sign Up\n        </Link>\n      </p>\n      <GoogleLoginButton onSuccess={handleLoginSuccess} />\n    </div>\n  );\n};\n\nexport default SignInForm;\n","import React from \"react\";\nimport SignInForm from \"../../components/SignInForm/SignInForm\";\nimport { Link } from \"react-router-dom\";\nimport AdvantagesSection from \"../../components/AdvantagesSection/AdvantagesSection\"; \nimport styles from \"./SignInPage.module.css\";\nimport { Page } from \"../../components/Page/Page\";\n\n\nconst SignUpPage = () => {\n  return (\n    <div className={styles.SignInPageWrapper}>\n      <div className={styles.SignInPageSection}>\n        <Page/>\n          <SignInForm />\n      </div>\n      <div className={styles.SignInPageMedia}>\n        <AdvantagesSection />\n      </div>\n    </div>\n  );\n};\n\nexport default SignUpPage;\n"],"names":["GoogleLoginButton","dispatch","useDispatch","navigate","useNavigate","handleSuccess","response","token","result","loginGoogle","error","toast","handleFailure","jsx","styles","GoogleLogin","SignInSchema","yup.object","yup.string","SignInForm","stopClick","useSelector","selectClick","register","handleSubmit","errors","useForm","yupResolver","passwordShown","setPasswordShown","useState","togglePasswordVisibility","onSubmit","data","login","accessToken","refreshToken","handleLoginSuccess","user","jsxs","css","FaRegEyeSlash","Link","SignUpPage","Page","AdvantagesSection"],"mappings":"08BAOMA,EAAoB,IAAM,CAC9B,MAAMC,EAAWC,IACXC,EAAWC,IAEXC,EAAgB,MAAOC,GAAa,CACxC,MAAMC,EAAQD,EAAS,WACnB,GAAA,CACI,MAAAE,EAAS,MAAMP,EAASQ,EAAY,CAAE,MAAAF,EAAO,CAAC,EAAE,SACzC,aAAA,QAAQ,cAAeC,EAAO,WAAW,EACzC,aAAA,QAAQ,eAAgBA,EAAO,YAAY,EACxDL,EAAS,UAAU,QACZO,EAAO,CACN,QAAA,MAAM,uBAAwBA,CAAK,EACrCC,EAAA,MAAM,wBAAwBD,CAAK,EAAE,CAC7C,CAAA,EAGIE,EAAiBF,GAAU,CACvB,QAAA,MAAM,uBAAwBA,CAAK,CAAA,EAI3C,OAACG,EAAA,IAAA,OAAI,UAAWC,EAAO,qBACvB,SAACD,EAAAA,IAAA,MAAA,CAAI,UAAWC,EAAO,kBACrB,SAAAD,EAAA,IAACE,EAAA,CACC,SAAU,2EACV,WAAW,oBACX,UAAWV,EACX,UAAWO,EACX,aAAc,oBAAA,CAAA,CAEhB,CAAA,CACF,CAAA,CAEJ,EC3BMI,EAAeC,EAAW,EAAE,MAAM,CACtC,MAAOC,EAAW,EAAE,MAAM,eAAe,EAAE,SAAS,mBAAmB,EACvE,SAAUA,EAAW,EAAE,SAAS,sBAAsB,CACxD,CAAC,EAEKC,GAAa,IAAM,CACvB,MAAMlB,EAAWC,IAEXC,EAAWC,IAEXgB,EAAYC,EAAYC,CAAW,EAEnC,CACJ,SAAAC,EACA,aAAAC,EACA,UAAW,CAAE,OAAAC,CAAO,GAClBC,EAAQ,CACV,SAAUC,EAAYX,CAAY,CAAA,CACnC,EAEK,CAACY,EAAeC,CAAgB,EAAIC,WAAS,EAAK,EAElDC,EAA2B,IAAM,CACrCF,EAAiB,CAACD,CAAa,CAAA,EAG3BI,EAAW,MAAOC,GAAS,CAC3B,GAAA,CACF,MAAM3B,EAAW,MAAML,EAASiC,EAAMD,CAAI,CAAC,EAAE,SACvC,CAAE,YAAAE,EAAa,aAAAC,CAAiB,EAAA9B,EACzB,aAAA,QAAQ,cAAe6B,CAAW,EAClC,aAAA,QAAQ,eAAgBC,CAAY,EACjDjC,EAAS,UAAU,OACL,CAGhB,CAAA,EAGIkC,EAAsBC,GAAS,CACtB,aAAA,QAAQ,cAAeA,EAAK,WAAW,EACvC,aAAA,QAAQ,eAAgBA,EAAK,YAAY,EACtDnC,EAAS,UAAU,CAAA,EAGrB,OACGoC,EAAAA,KAAA,MAAA,CAAI,UAAWC,EAAI,WAClB,SAAA,CAAA3B,EAAA,IAAC,KAAG,CAAA,UAAW2B,EAAI,iBAAkB,SAAO,UAAA,EAC3CD,EAAA,KAAA,OAAA,CAAK,SAAUf,EAAaQ,CAAQ,EACnC,SAAA,CAAAnB,EAAA,IAAC,QAAM,CAAA,UAAW2B,EAAI,gBAAiB,SAAK,QAAA,EAC5C3B,EAAA,IAAC,QAAA,CACC,UAAW,GAAG2B,EAAI,eAAe,IAC/Bf,EAAO,MAAQ,GAAGe,EAAI,gBAAgB,IAAIA,EAAI,UAAU,GAAK,EAC/D,GACA,KAAK,QACL,YAAaf,EAAO,MAAQ,gBAAkB,mBAC7C,GAAGF,EAAS,OAAO,CAAA,CACtB,EACCE,EAAO,OACLZ,MAAA,IAAA,CAAE,UAAW2B,EAAI,aAAe,SAAOf,EAAA,MAAM,OAAQ,CAAA,EAGvDZ,EAAA,IAAA,QAAA,CAAM,UAAW2B,EAAI,gBAAiB,SAAQ,WAAA,EAC9CD,EAAA,KAAA,MAAA,CAAI,UAAWC,EAAI,eAClB,SAAA,CAAA3B,EAAA,IAAC,QAAA,CACC,UAAW,GAAG2B,EAAI,eAAe,IAC/Bf,EAAO,SAAW,GAAGe,EAAI,gBAAgB,IAAIA,EAAI,UAAU,GAAK,EAClE,GACA,KAAMZ,EAAgB,OAAS,WAC/B,YACEH,EAAO,SAAW,mBAAqB,sBAExC,GAAGF,EAAS,UAAU,CAAA,CACzB,EACAV,EAAA,IAAC4B,EAAA,CACC,UAAWD,EAAI,MACf,QAAST,CAAA,CACX,CAAA,EACF,EAECN,EAAO,UACLZ,MAAA,IAAA,CAAE,UAAW2B,EAAI,aAAe,SAAOf,EAAA,SAAS,OAAQ,CAAA,EAG3DZ,EAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUO,IAAc,UACxB,UAAWoB,EAAI,UAChB,SAAA,SAAA,CAED,CAAA,EACF,EACCD,EAAA,KAAA,IAAA,CAAE,UAAWC,EAAI,eAAgB,SAAA,CAAA,yBACT,UACtBE,EAAK,CAAA,GAAG,UAAU,UAAWF,EAAI,eAAgB,SAElD,UAAA,CAAA,EACF,EACA3B,EAAAA,IAACb,EAAkB,CAAA,UAAWqC,CAAoB,CAAA,CACpD,CAAA,CAAA,CAEJ,kKC3GMM,GAAa,IAEdJ,EAAAA,KAAA,MAAA,CAAI,UAAWzB,EAAO,kBACrB,SAAA,CAACyB,EAAA,KAAA,MAAA,CAAI,UAAWzB,EAAO,kBACrB,SAAA,CAAAD,EAAA,IAAC+B,EAAI,EAAA,QACFzB,GAAW,EAAA,CAAA,EAChB,QACC,MAAI,CAAA,UAAWL,EAAO,gBACrB,SAAAD,MAACgC,GAAkB,CAAA,EACrB,CACF,CAAA,CAAA"}